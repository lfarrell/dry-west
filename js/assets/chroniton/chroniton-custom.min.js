var handleRadius=6,handleHeight=8,caretHeight=5,handleD="M"+[-handleRadius,-handleHeight,handleRadius,-handleHeight,handleRadius,handleHeight-caretHeight,0,handleHeight,-handleRadius,handleHeight-caretHeight,-handleRadius,-handleHeight].join(),playWidth=10,playD="M"+[0,0,playWidth/1.2,playWidth/2,0,playWidth,0,0].join(),pauseD="M"+[0,0,playWidth/3,0,playWidth/3,playWidth,0,playWidth].join()+"Z M"+[playWidth/2+0,0,playWidth/2+playWidth/3,0,playWidth/2+playWidth/3,playWidth,playWidth/2+0,playWidth].join();
function chroniton(){function a(b){b instanceof HTMLElement&&(b=d3.select(b));b.each(function(){function b(a,c){var e=new Date(Math.min(Math.max(+d[0],+a),+d[1])),g=l;c&&(g=l.transition(),c.ease&&g.ease(c.ease),c.duration&&g.duration(c.duration));g.call(f.extent([e,e])).call(f.event)}u&&(c.left=30);x&&(c.top=0);e.domain(d).range([0,h-c.left-c.right]);f.x(e).extent([d[0],d[0]]).on("brush",function(){var a=f.extent()[0];d3.event&&d3.event.sourceEvent&&"keydown"!==d3.event.sourceEvent.type&&(a=e.invert(d3.mouse(this)[0]),
    f.extent([a,a]));t.attr("transform",function(b){return"translate("+[e(a),0]+")"});p.text(v(a)).attr("text-anchor","left");var b=p.node().getComputedTextLength()/2,d=e(a)-b,g=e(a)+b;p.attr("transform",function(f){return d<-c.left?"translate("+[-c.left,20]+")":g>h-c.left?"translate("+[h-c.left-2*b,20]+")":"translate("+[e(a)-b,20]+")"})});var g=d3.select(this).selectAll("svg").data([0]);g.enter().append("svg").attr("class","chroniton").attr("tabindex",1).on("keydown",z).append("g").append("g").attr("class",
    "x axis");g.attr("width",h).attr("height",m);var q=g.select("g").attr("transform","translate("+c.left+","+c.top+")");q.select(".x.axis").attr("transform","translate(0,"+(m-c.bottom-c.top)+")").call(y);var n=q.select(".x.axis .domain").remove().node(),k=q.select(".x.axis").node();k.insertBefore(n,k.childNodes[0]);q.select(".domain").select(function(){return this.parentNode.insertBefore(this.cloneNode(!0),this.parentNode.childNodes[0])}).attr("class","halo");q.select(".x.axis .domain").on("click",function(){b(e.invert(d3.mouse(this)[0]))});
    if(u){var g=g.append("g").attr("transform","translate("+[8,c.top+13]+")"),r=g.append("path").attr("transform","translate(2, 2)").attr("d",playD).attr("class","play-button");g.append("rect").attr("fill","none").attr("pointer-events","visible").attr("width",15).attr("height",15).on("click",function(){a.playPause();r.attr("d",a.playing()?pauseD:playD)})}var l=q.append("g").attr("class","slider").attr("transform","translate("+[0,m-c.bottom-c.top+2]+")").call(f),t=l.append("path").attr("d",handleD).attr("class",
        "handle"),p=l.append("g").attr("transform","translate(0, -35)").append("text").attr("class","label");l.call(f.event);f.on("brushstart",function(){l.classed("brushing",!0)}).on("brushend",function(){l.classed("brushing",!1);var a=f.extent()[0];w.change(a)});w.on("setValue",b)})}function z(){if(r)switch(d3.event.which){case 39:setValue(new Date(+f.extent()[0]+(+e.invert(10)-d[0])));d3.event.preventDefault();break;case 37:setValue(new Date(+f.extent()[0]-(+e.invert(10)-d[0]))),d3.event.preventDefault()}}
    var c={top:10,right:20,bottom:20,left:20},d=[new Date("1/1/2000"),new Date],h=660,m=50,r=!0,u=!1,n=!1,x=!1,t=!1,p=1,k=null,v=d3.time.format("%Y-%m-%d"),e=d3.time.scale().clamp(!0),y=d3.svg.axis().scale(e).orient("bottom").tickSize(10,0),f=d3.svg.brush(),w=d3.dispatch("change","setValue");a.playbackRate=function(b){if(!arguments.length)return p;if("number"!==typeof b)throw Error("argument must be a number of pixels per second");p=b;return a};a.play=function(){n=!0;return a};a.playing=function(){return n};
    a.playPause=function(){n?a.pause():a.play();return a};a.pause=function(){k=null;n=!1;return a};a.stop=function(){a.pause();a.setValue(d[0]);return a};a.loop=function(b){if(!arguments.length)return t;if("boolean"!==typeof b)throw Error("argument must be a boolean for whether to loop");t=b;return a};a.width=function(b){if(!arguments.length)return h;h=b;e.domain(d).range([0,h-c.left-c.right]);return a};a.tapAxis=function(b){b(y);if("function"!==typeof b)throw Error("argument must be a function");return a};
    a.height=function(b){if(!arguments.length)return m;if("number"!==typeof b)throw Error("argument must be a numeric width");m=b;return a};a.domain=function(b){if(!arguments.length)return d;d=b;e.domain(d).range([0,h-c.left-c.right]);return a};a.labelFormat=function(b){if(!b)return v;if("function"!==typeof b)throw Error("argument must be a label formatter function");x=!1;c.top=10;m=50;v=b;return a};a.hideLabel=function(){v=d3.functor("");x=!0;c.top=0;m=27;return a};a.getValue=function(){return f.extent()[0]};
    a.isAtStart=function(){return+f.extent()[0]===+d[0]};a.isAtEnd=function(){return+f.extent()[0]===+d[1]};a.getScale=function(){return e.copy()};a.getMargin=function(){return JSON.parse(JSON.stringify(c))};a.setValue=function(b,c){w.setValue(b,c);return a};a.playButton=function(b){if(void 0===b)return u;if("boolean"!==typeof b)throw Error("argument must be a boolean setting");u=b;return a};a.keybindings=function(b){if(void 0===b)return r;if("boolean"!==typeof b)throw Error("argument must be a boolean setting");
        r=b;return a};d3.timer(function(){if(n){var b=(new Date).getTime();null===k&&(k=b);var c=b-k,g=(+e.invert(.1)-+d[0])*p,c=c*g;a.setValue(new Date(+f.extent()[0]+c));k=b;t&&a.isAtEnd()&&a.setValue(d[0])}});return d3.rebind(a,w,"on")};